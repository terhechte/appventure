<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>An Emacs Lisp tooling tutorial, writing a bulk mailer</title>
  <link rel="stylesheet" href="/css/bulma.min.css" />
  <link rel="stylesheet" href="/css/style.css" />

  <meta content="" name="description" /><meta content="benedikt, bulk, c, clojure, clojurescript, cocoa, emacs, email, evil, html, ios, javascript, lisp, mac, mailer, objective-c, photodesk, research, stylemac, terhechte, tutorial, vim, vimscript" name="keywords" /><meta content="Benedikt Terhechte" name="author" /><meta content="An Emacs Lisp tooling tutorial, writing a bulk mailer" property="og:title" /><meta content="" property="og:description" /><meta content="http://appventure.me/2014/01/29/emacs-lisp-tooling-tutorial-writing-bulk-mailer/" property="og:url" /><meta content="An Emacs Lisp tooling tutorial, writing a bulk mailer" name="twitter:title" /><meta content="" name="twitter:description" /><meta content="summary" name="twitter:card" /><meta content="http://appventure.me/img/ez@2x.png" name="twitter:image" /><meta content="http://appventure.me/img/ez@2x.png" property="og:image" />
  <meta name="twitter:site" content="@terhechte" />
  <meta name="twitter:creator" content="@terhechte" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,800" rel="stylesheet" />
  <script defer="defer" src="/js/fontawesome-all.min.js"></script>
  
 </head>
 <body>
  <section class="section" id="head">
   <div class="container" id="container">
    <div>

     <div class="columns">
      <div class="column is-3">
          <span id="brand"><a href="/index.html"><img src="/img/brand.png" srcset="/img/brand.png 1x, /img/brand@2x.png 2x" /></a></span>
      </div>
      <div class="column is-7">
       <span id="subbrand">
        Simple. Swift. Guides.</span>
      </div>
      <div class="column is-2">
          <div class="field">

          </div>
      </div>
     </div>
    </div>
   </div>
  </section>


  <section class="section" id="main">
   <div class="container" id="container">
    <div class="columns">
     <div class="column">
      <div class="columns">
       <div class="column">
        <div class="tabs">
		 
        </div>
       </div>
       <div class="column is-narrow">
        <div class="buttons has-addons is-hidden-mobile">
        </div>
       </div>
      </div>

      <div class="box" style="margin-bottom: 250px;">
            <h5 style="font-size: 38px; font-weight: bold;"><a class="xx-new-article" href="https://terhech.de/posts/2014-1-29-emacs-lisp-bulk-mailer.html">AppVenture has been updated</a></h5>
            <p style="padding-top: 10px; padding-bottom: 10px; font-size: 18px;">
                All articles have been rewritten and improved. You will be forwarded
                to the updated article.
            </p>
            <p style="font-size: 18px; font-weight: bold;">
                <a class="xx-new-article" href="https://terhech.de/posts/2014-1-29-emacs-lisp-bulk-mailer.html" id="xxx-new-article">Click here to go there directly.</a>
            </p>
            <script>
                 setTimeout(function(){ 
                    document.location.href=document.getElementById("xxx-new-article").href;
                },
                    0);
            </script>
      </div>




      <div role="content" id="maincontent" style="opacity: 0.5"><article id="article-297419348" class="article-post content is-medium">


 
          <h6><i class="fi-pencil"></i> Wed, 29 Jan 2014 <a href="/2014/01/29/emacs-lisp-tooling-tutorial-writing-bulk-mailer/">#</a></h6>

        <h3><a href="/2014/01/29/emacs-lisp-tooling-tutorial-writing-bulk-mailer/">An Emacs Lisp tooling tutorial, writing a bulk mailer</a></h3>



        <div class="actual-content"><p>
There were serveral reasons why I decided to switch from Vim to Emacs+Evil<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> almost a year ago. I'd been using Vim full time since somewhere between 2009 and 2010, and I'd solely used it on servers and in terminals at least since 1999. Before 2009, I was an avid TextMate user and it was only when I understood the power of Vim macros and plugins that I made the full switch. Then, around one year ago, I decided to switch again and try Emacs. I don't want to go into the various reasons for this, that's for another post, but I'd like to present one in particular: Emacs Lisp.
</p>

<p>
One of the reasons why I am attracted to editors like Vim and Emacs is because I am lazy. I don't want to spent my time doing things which can probably be automated. And as a programmer, I see automation opportunities everywhere. Vim and Emacs offer complex macro abilities that make it easy to take boring, redundant tasks, encapsulate them in a dedicated action, and perform them over a range of tasks. Examples are <a href="http://vimgolf.com/challenges/4d1aa1d9b8cb34093200039f">wrapping Python code</a>, <a href="http://vimgolf.com/challenges/4d1b78e281502541ad000009">turning csv into queries</a>, <a href="http://vimgolf.com/challenges/4fe3d2c2f73248000100004b">changing paths in CSS files</a> or <a href="http://vimgolf.com/challenges/50a2bdd4f0ea8a0002000055">working with tabular data</a>. All this can also be done with other editors, but Vim (in this example) makes it very easy to accomplish this with only a few keystrokes.
</p>

<p>
However, once the complexity of the to-be-automated task gets too high, the macro approach does not work so well anymore. Vim offers Vimscript for this, a scripting language for editor extensions<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup>. Emacs offers Emacs Lisp which belongs to the Lisp family of languages, like Common Lisp, Scheme or nowadays Clojure. Since I wanted to dive deeper into Lisp anyway, and since I never liked Vimscript much (There's also no use for Vimscript outside of Vim, contrary to Lisp), being able to code Emacs in Lisp was one of the reasons why I switched<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>.
</p>

<div id="outline-container-orgd1fcef2" class="outline-2">
<h2 id="orgd1fcef2"><span class="section-number-2">1</span> Easily Extending Emacs with Lisp</h2>
<div class="outline-text-2" id="text-1">
<p>
Shortly after feeling at home in Emacs, I started hacking in Emacs Lisp to get a feeling for it. Compared to other editors, it felt very natural and easy to extend it. The process is rather simple:
</p>

<ol class="org-ol">
<li>Create a new EmacsLisp Buffer / File</li>
<li>Write some EmacsLisp Code</li>
<li>Select the code and evaluate it</li>
<li>Now you can use the feature</li>
</ol>

<p>
You don't even have to save the code in order to use it.
</p>

<p>
The following line of code binds the shortcut <code>ctrl-x + 8</code> to a function that inserts the string "test" at the current cursor position
</p>

<div class="org-src-container">
<pre class="src src-Lisp">(global-set-key (kbd "C-x 8") (lambda () (interactive) (insert "test")))
</pre>
</div>

<p>
In order to use it, you don't have to save or start anything, simply type it, and at the end hit <code>ctrl-x ctrl-e</code>. After that, the command has been registered and you can use it anywhere.
</p>

<p>
Lets say you're editing a DNA code file, and in there you have to repeat a certain set of characters n times, i.e. <code>gatacagatacagataca...</code>. So you'd like a function that you can hand the characters as well as how often you want them repeated<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>. The required code for that is quite simple:
</p>

<div class="org-src-container">
<pre class="src src-Lisp">(defun repeat-the-chars (chars repeat)
  (interactive "MEnter Characters: \nnEnter Repetitions: ")
  (mapcar (lambda (x) (insert chars)) (number-sequence 0 repeat)))

(global-set-key (kbd "C-x 8") 'repeat-the-chars)
</pre>
</div>

<ul class="org-ul">
<li>The line <code>(interactive "MEnter ...)</code> is an interactive format string. It tells Emacs to read user input when calling the function. First, it will ask for a String (<code>M</code> is the input format code for a string), then it will ask for a Number (<code>n</code> is the input format code for a number). These two values will then be added as function arguments (<code>chars</code> and <code>repeat</code>).</li>
<li>The line <code>(mapcar ...)</code> runs a anonymous function / lambda over the number range from 0 until <code>repeat</code>. Each function invocation uses the <code>insert</code> call to insert text.</li>
<li>Finally, the <code>global-set-key</code> line tells Emacs to run the function <code>repeat-the-chars</code> when using the <code>ctrl-x + 8</code> shortcut. The quote (<b>'</b>) in front of the function name keep Emacs from executing it right away. It is a bit like a function pointer. It quotes the symbol instead of evaluating it right away.</li>
</ul>

<p>
I find this impressively easy. This allows me to quickly write short functions for complex tasks whenever I deem it necessary. I recently had to write <a href="http://www.scala-lang.org">Scala</a> code to define models for the <a href="http://slick.typesafe.com">Slick framework</a>. The models had a lot of fields, but the definitions all looked rather similar. The syntax was as follows:
</p>

<div class="org-src-container">
<pre class="src src-Scala">def name = column[String] ("bo_name")
def location = column[String] ("bo_location")
def opens = column[Int] ("bo_opens")
def closes = column[Int] ("bo_closes")
</pre>
</div>

<p>
Since I had to write a lot of fields in this a syntax, I sought a way to automate it. I wrote the following Emacs Lisp Snippet:
</p>

<div class="org-src-container">
<pre class="src src-Lisp">(defun create-column (name type)
  (interactive "Mname: \nMtype: ")
  (setq tp (split-string name "_"))
  (insert (format "  def %s = column[%s] (\"%s\")\n"
		  (last tp) type name)))
(global-set-key (kbd "C-x 1") 'repeat-the-chars)
</pre>
</div>

<ul class="org-ul">
<li><code>setq</code> defines a local variable 'tp' that contains a list split by "_". So when I enter "bo_test" it would contain ("bo", "test")</li>
<li><code>(last tp)</code> gets the last element from the list tp. The rest should be self explanatory</li>
</ul>

<p>
After this, I could just hit <code>ctrl-x + 1</code>, Enter the type and name of the field, and it would output a field definition as above<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>.
</p>

<p>
After these simple explorations of why Emacs Lisp is nice, lets have a look at something more elaborate. But first, a sidenote about calling functions.
</p>
</div>
</div>

<div id="outline-container-orgcecae10" class="outline-2">
<h2 id="orgcecae10"><span class="section-number-2">2</span> Simple Function Calling</h2>
<div class="outline-text-2" id="text-2">
<p>
As you have seen above, whenever I wrote a new function, I bound it to a keyboard shortcut, like <code>ctrl-x + 8</code>. This has several disadvantages though: 
</p>
<ul class="org-ul">
<li>You never now which keyboard shortcuts are really free, as different major and minor Emacs modes (i.e. modes for different languages or editing extensions) may also set a shortcut for the key that you chose.</li>
<li>If you have too many functions, there're no keys left or it will be confusing to remember which key did what.</li>
</ul>

<p>
Fortunately the default setup of Emacs has a fantastic alternative to setting keyboard shortcuts, <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/M_002dx.html">the <code>M-x</code> shortcut</a> to run commands by name. After typing the shortcut, you can simply enter the name of the function that you're searching for and the function will be executed. Even better, Emacs has integrated auto completion for this, so if you happen to not remember the detailed name of the function anymore - no problem. Even better, there're <a href="https://github.com/emacs-helm/helm">Emacs plugins that offer fuzzy searching</a> for this, so instead of entering <code>repeat-the-chars</code> you simply enter <code>repeat char</code> and the correct function will be highlighted.
</p>

<p>
This is a great way to call any function that you defined previously, or any function that was delivered with Emacs or with one of the plugins that you installed. I can't stress how awesome this is. Imagine you're searching for a function to truncate lines in Emacs. Just hit <code>M-x</code> type "truncate" and <code>toggle-truncate-lines</code> will appear in the search results. It is like QuickSilver, Butler, Spotlight or Alfred for all the functions in your editor.
</p>
</div>
</div>

<div id="outline-container-org30b8ee8" class="outline-2">
<h2 id="org30b8ee8"><span class="section-number-2">3</span> Writing a simple bulk mailer in Emacs Lisp</h2>
<div class="outline-text-2" id="text-3">
<p>
Now that we've seen the basics of Emacs Lisp functions, let's try our hands on something more difficult. One of the advantages<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup> of Emacs is that it offers so much functionality in various disciplines that it can almost be seen as an operating system. There's a newsgroup reader, a webbrowser, a terminal, a mail reader, a calendar, a todo framework, a flowchart and UML mode, a RSS reader, a couple of games, and much more. As explained above, all these modes offer functions that you can call from your Emacs Lisp code. This makes it terribly easy to hack together a complex mode to achieve several things at once<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup>.
</p>

<p>
Now we need a problem to solve. Consider you're working at the hottest new startup and you're about to launch. Your boss comes over to explain a problem that just rose up. You need to send out the press release to a ton of tech websites, but there's no money left to buy a bulk mailing software, and there's also no time left to cobble something together in PHP and MySQL (or Python or Ruby), and now the whole startup is damned just because they can't get the press release out. 
</p>

<p>
You look at him with with a soft expression of understanding, unfold your fingers and answer "I'll have that running in Emacs in 15 minutes", enjoying the puzzled look in his eyes as he remembers how he and the other Textmate users always made fun of you and your very weird editor and how you're still living in the 80ties<sup><a id="fnr.8" class="footref" href="#fn.8">8</a></sup>. So now there's our problem, and we need to solve it <b>quickly</b> lest the others will start ridiculing Emacs again.
</p>

<p>
First, we'll need to set up Emacs to send mail. Thankfully, that's <a href="http://www.emacswiki.org/emacs/SendingMail">easy and already documented elsewhere</a>.
</p>

<p>
The first 3 minutes are over, but now your Emacs can send mails just fine using the <code>compose-mail</code> function.
</p>
</div>

<div id="outline-container-org8125759" class="outline-3">
<h3 id="org8125759"><span class="section-number-3">3.1</span> Getting the mail data</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Next, we need to get our list of addresses from somewhere. We could read it from a database, or from a CSV file, or - probably the simplest solution - we just open it as a file in Emacs and advance over it line for line.
</p>

<p>
Our file will have the format:
</p>

<div class="org-src-container">
<pre class="src src-CSV">"Carl" "Hogan" "VentureBeat" "hogan@venturebeat.com"
"Claus" "Cafka" "StartupStartup" "claus@startupstartup.com"
</pre>
</div>

<p>
We want to define a function <code>get-mail-data</code> that should return a map/hash/dictionary with the keys "name", "surname", "site" and "email".
</p>

<div class="org-src-container">
<pre class="src src-Emacs">(defun get-mail-data (from-buffer-name)
  "Return a dictionary/hash/map from the data buffer with the keys
   name, surname, site and email set."
  (pairlis '("name" "surname" "site" "email")
	   (split-string-and-unquote
	    (with-current-buffer (get-buffer from-buffer-name)
	      (buffer-substring-no-properties (line-beginning-position)
					      (line-end-position))))))
</pre>
</div>

<ul class="org-ul">
<li><code>pairlis</code> Creates a paired list with its arguments. Thus (pairlis '("a" "b") (1 2))  becomes '(("a" 1)("b" 2))</li>
<li>The <code>with-current-buffer get-buffer buffer-substring...</code> function is simple, it gets the current line without formatting properties (i.e. bold etc) from the buffer in the argument <code>from-buffer-name</code>.</li>
</ul>

<p>
Another 3 minutes are over.
</p>
</div>
</div>

<div id="outline-container-org99a2294" class="outline-3">
<h3 id="org99a2294"><span class="section-number-3">3.2</span> Getting the mail template</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Now, we also need to get the text from the template that should be send. Our template will have template tags enclosed in brackets, like this <code>[email]</code>.
</p>

<pre class="example">
Hey [name] [surname]

I'd like to show you our new startup, Example Startup. We think that [site] is the best startup reporting site!

Cheers,
Me
</pre>

<p>
Instead of saving this as a file somewhere and loading it, we'll just read this template from an open file in Emacs (buffer). Just as with the list of addresses.
</p>

<div class="org-src-container">
<pre class="src src-Lisp">(defun get-template-data (from-template-buffer)
  "Return the mail template from the template buffer as a string"
  (with-current-buffer (get-buffer from-template-buffer) (buffer-string)))
</pre>
</div>

<p>
Nothing new in this function, we get the contents of the buffer <code>from-template-buffer</code> and return it as a string.
</p>

<p>
Another 2 minutes are over, now we have 7 minutes left.
</p>
</div>
</div>

<div id="outline-container-org0dcd31f" class="outline-3">
<h3 id="org0dcd31f"><span class="section-number-3">3.3</span> The main function</h3>
<div class="outline-text-3" id="text-3-3">
<p>
Finally, we need a function that reads one line after the other, and composes and sends a mail.
</p>

<div class="org-src-container">
<pre class="src src-Lisp">(defvar subject "Awesome startup started!")

(defun personalize ()
  (interactive "M\nEnter Mail Subject: ")

  (let ((text (get-template-data "template"))
	 (dict (get-mail-data "data.el")))

    (loop for (key . value) in dict do
	  (setq text (replace-regexp-in-string (format "\\[%s\\]" key) value text)))

    (kill-new text)

    (with-current-buffer (get-buffer "data.el") (forward-line))
    (compose-mail (cdr (assoc "email" dict)) subject)))
</pre>
</div>

<ul class="org-ul">
<li><code>(defvar ...)</code> defines a global scope variable. We do this since we only want to set the contents of the subject once, specifically at the beginning.</li>
<li><code>let</code> defines variables, in this case <code>text</code> which contains our template, and <code>dict</code> which contains our address contents for the current line in the data. <sup><a id="fnr.9" class="footref" href="#fn.9">9</a></sup></li>
<li><code>(loop for (key . value) in dict do ...)</code> This is actually a function defined in an <a href="http://www.gnu.org/software/emacs/manual/html_mono/cl.html">Emacs extension called 'CL-Macs',</a> which is a set of definitions that extend Emacs with Common Lisp functionalities. It is a really good Emacs addition. It loops over the 'keys' in our dictionary<sup><a id="fnr.10" class="footref" href="#fn.10">10</a></sup> and lets us do something with them</li>
<li><code>(setq text (replace-regexp-in-string ...))</code> This line replaces the contents of the <code>text</code> variable during each iteration of the loop with an updated version where the key <code>[key]</code> is replaced with the actual value (i.e. <code>[email]</code> with <code>hogan@venturebeat.com</code>).<sup><a id="fnr.11" class="footref" href="#fn.11">11</a></sup></li>
<li><code>(kill-new text)</code> This particular expression adds the contents of the variable <code>text</code> to our clipboard. The clipboard in Emacs is called the "kill ring" and "kill=new" therefore creates a new entry on the "kill ring". As you may have guessed, the kill ring can have multiple entries, which makes it easy to store more than one value.</li>
<li><code>(with-current-buffer (get-buffer "data.el") (forward-line))</code> Simply forwards the current line in our data buffer by one since we've now finished processing this line.</li>
<li><code>(compose-mail ....)</code> This is an Emacs function that sends opens a mail composition buffer for a specific email address and a subject.</li>
</ul>

<p>
When we call the <code>personalize</code> function it will open a new buffer for us, that looks like this.
</p>

<div class="org-src-container">
<pre class="src src-Text">To: hogan@venturebeat.com
Subject: Awesome startup started!
From: Joe the Coder &lt;coder1@awesome-startup.com&gt;
--text follows this line--
</pre>
</div>

<p>
But, where's the text? Well, we only added it to the clipboard, we do have to paste (yank, in Emacs parlance) it from there in order to insert it into this mail. This is done with the shortcut <code>ctrl-y</code>.
</p>

<p>
Now we can send this mail with the shortcut <code>ctrl-c ctrl-c</code>
</p>
</div>
</div>

<div id="outline-container-orgd292670" class="outline-3">
<h3 id="orgd292670"><span class="section-number-3">3.4</span> Wait, that's it?</h3>
<div class="outline-text-3" id="text-3-4">
<p>
This was a fun excercise, though in reality it would have been even faster to code this with the PHP mail function and read the data from two text files. However, the beauty of this solution is that it is deliberately interactive. Each mail is semi-automated meaning you can add custom personalizations before sending it. Also, the mail library in Emacs offers more functions like attaching files, signing messages<sup><a id="fnr.12" class="footref" href="#fn.12">12</a></sup>, sending messages at a later time and more.
</p>

<p>
Now, some may wonder whether it is possible to do all this without any interactivity, i.e. sending the mail right away without even opening a buffer. Since almost everything in Emacs is written in Emacs Lisp (save for a base runtime in C), you can just look up the sourcecode of the required function and implement full bulk sending. In this case the functions in question are <code>compose-mail</code> and <code>message-send-and-exit</code>. When I say look up the sourcecode, I also wasn't talking about Google or Github, no simply hit <code>M-x</code>, type <code>find-function</code>, hit enter, and then the name of the function (i.e. <code>compose-mail</code>). Emacs will then open the required file at the correct position. However, this probably goes beyond our initial limit of 15minutes so our boss will have to repeatedly hit <code>ctrl-c ctrl-c</code> until all mails are through.
</p>

<p>
So what does it look like in Emacs, when youre doing this, you may ask, here's a screenshot from my Emacs with the code loaded and running:
</p>


<div class="figure">
<p><a href="http://appventure.me/cimg/screenshot-bulk-mail.png" align="center" class="screenshot"><img src="http://appventure.me/cimg/screenshot-bulk-mail-thumb.png" alt="screenshot-bulk-mail-thumb.png" align="center" class="screenshot" /></a>
</p>
<p><span class="figure-number">Figure 1: </span>Emacs Bulk Mailer Screenshot</p>
</div>
</div>
</div>

<div id="outline-container-org1f68fe8" class="outline-3">
<h3 id="org1f68fe8"><span class="section-number-3">3.5</span> Final Words</h3>
<div class="outline-text-3" id="text-3-5">
<p>
This was more or less an excercise for the sake of excercise. Except for some rare situations I doubt there's much use in this. However, it worked well as an issue that had a confined problem space, operated with functionality outside of the realm of other editors (sending mail), and was short enough to use it as a simple example.
</p>

<p>
Already in the first weeks of using Emacs, I wrote more code in Emacs Lisp than I ever wrote in Vimscript. I attribute this to three key factors.
</p>
<ol class="org-ol">
<li><b>Ease of Evaluation</b> The ease with which one can evaluate code in any buffer (or in a special Emacs Lisp Repl)</li>
<li><b>Text editing APIs</b> The functions for working with buffers, files, and texts have been honed over 30 years.</li>
<li><b>Library and Search</b> A huge functionality library with great search. It is really easy to use fuzzy search terms to find a particular function, and then one can just have a look at the source, all from within the editor.</li>
</ol>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><a href="https://gitorious.org/evil/pages/Home">Evil is an Emacs extension</a> that adds Vim Keybindings to Emacs so that it can be controlled with the same shortcuts as Vim.</div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara">The smart will point out that Vim also offers bindings to Python and Ruby, if it is compiled in such a way, so that one is not <b>required</b> to use Vimscript, however I always found the actual api for this very weird and hackish.</div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara">Actually, I had already tried Emacs before, in late 2001 but back then it lacked good HTML/PHP support compared to my default editor at the time, <a href="http://en.wikipedia.org/wiki/Macromedia_HomeSite">HomeSite</a></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara">Of course, both Vim and Emacs offer such a function already, but I thought this would be simple as a demonstration</div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara">I actually simplified it a little for this post, the original function made it even easier to create new fields but was more elaborate</div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara">There're some who'd rather call this disadvantages.</div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara">Like executing a shell script and writing something into your calendar whenever a you receive a certain mail</div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara">I've actually had situations kinda like that</div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara">data.el is the name of the buffer that contains the addresses.</div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara">Actually it is not a dictionary but for the sake of simplicity I will ignore this here.</div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11">11</a></sup> <div class="footpara">This code example uses a lot of side effects, something which is usually frowned upon in functional programming and Lisp, however I decided to write the examples this way so they're easier to understand for novices.</div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12">12</a></sup> <div class="footpara">Something quickly gaining importance nowadays</div></div>


</div>
</div></div>

        <div id="followme">
            <p>If you read this far, you should follow me (<a href="http://www.twitter.com/terhechte">@terhechte</a>) <br /> on <a href="http://www.twitter.com/terhechte"><i class="fi-social-twitter"></i> Twitter</a></p>
            <br />
        </div>
        

        <div class="footnotes">
            <ol></ol>
        </div>

        <p class="anchor"><i class="fi-anchor"></i></p>
 
      </article></div>


    </div>

    <div class="column is-narrow">

     <aside class="menu">

         



      <br />
      <ul class="menu-list">
       <li>
        <p class="menu-label">
         <a>
          <i class="fas fa-dove"></i>
          Swift Topics
         </a>
        </p>
        <ul>
            <li><a href="/topics/all.html">All</a></li>
           
            
            <li><a href="/topics/swift-tricks.html">Swift Tricks</a></li>
            
         
            
            <li><a href="/topics/language.html">Language</a></li>
            
         
            
            <li><a href="/topics/hands-on.html">Hands On</a></li>
            
         
            
            <li><a href="/topics/blog.html">Blog</a></li>
            
         
            
         
        </ul>
       </li>

       <li>
           <p class="menu-label">
               <a>
                   <i class="fas fa-book"></i>
                   Guides
               </a>
           </p>
           <ul>
                 
               <li><a href="/guides/pattern_matching/intro.html">🧩 Pattern Matching</a></li>
                 
               <li><a href="/guides/advanced_practical_enum_examples/introduction.html">🚦 Enums</a></li>
                 
               <li><a href="/guides/map_flatmap_reduce_more/intro.html">🗺 Map, Reduce &amp; more</a></li>
                 
               <li><a href="/guides/associated_types/associated_types.html">🧙🏻 Associated Types</a></li>
                 
               <li><a href="/guides/tuples/introduction.html">🍱 Tuples</a></li>
                 
               <li><a href="/guides/optionals/intro.html">⁉️ Optionals</a></li>
                 
               <li><a href="/guides/swift_reflection/introduction.html">🔮 Reflection</a></li>
                 
           </ul>
       </li>
      </ul>

      <div class="sidebar-banner">
          <a href="https://contravariance.rocks"><img src="/img/contravariance_banner.png" srcset="/img/contravariance_banner.png 1x, /img/contravariance_banner@2x.png 2x" /></a>
      </div>

      <ul class="menu-list">
       <li>
        <p class="menu-label">
         <a>
          <i class="fas fa-tags"></i>
          Tags
         </a>
        </p>
        <ul>

     
     <li><a href="/tags/pattern-matching.html" class="tags has-addons"><span class="tag is-info is-rounded">pattern matching</span><span class="tag is-primary is-rounded">25</span></a></li>
     
     <li><a href="/tags/switch.html" class="tags has-addons"><span class="tag is-info is-rounded">switch</span><span class="tag is-primary is-rounded">24</span></a></li>
     
     <li><a href="/tags/enum.html" class="tags has-addons"><span class="tag is-info is-rounded">enum</span><span class="tag is-primary is-rounded">20</span></a></li>
     
     <li><a href="/tags/associated.html" class="tags has-addons"><span class="tag is-info is-rounded">associated</span><span class="tag is-primary is-rounded">14</span></a></li>
     
     <li><a href="/tags/tuples.html" class="tags has-addons"><span class="tag is-info is-rounded">tuples</span><span class="tag is-primary is-rounded">13</span></a></li>
     
     <li><a href="/tags/reflection.html" class="tags has-addons"><span class="tag is-info is-rounded">reflection</span><span class="tag is-primary is-rounded">12</span></a></li>
     
     <li><a href="/tags/reduce.html" class="tags has-addons"><span class="tag is-info is-rounded">reduce</span><span class="tag is-primary is-rounded">11</span></a></li>
     
     <li><a href="/tags/box.html" class="tags has-addons"><span class="tag is-info is-rounded">box</span><span class="tag is-primary is-rounded">10</span></a></li>
     
     <li><a href="/tags/generics.html" class="tags has-addons"><span class="tag is-info is-rounded">generics</span><span class="tag is-primary is-rounded">7</span></a></li>
     
     <li><a href="/tags/compactmap.html" class="tags has-addons"><span class="tag is-info is-rounded">compactMap</span><span class="tag is-primary is-rounded">6</span></a></li>
     
     <li><a href="/tags/filter.html" class="tags has-addons"><span class="tag is-info is-rounded">filter</span><span class="tag is-primary is-rounded">6</span></a></li>
     
     <li><a href="/tags/map.html" class="tags has-addons"><span class="tag is-info is-rounded">map</span><span class="tag is-primary is-rounded">6</span></a></li>
     
     <li><a href="/tags/mirror.html" class="tags has-addons"><span class="tag is-info is-rounded">mirror</span><span class="tag is-primary is-rounded">6</span></a></li>
     
     <li><a href="/tags/protocol.html" class="tags has-addons"><span class="tag is-info is-rounded">protocol</span><span class="tag is-primary is-rounded">6</span></a></li>
     
     <li><a href="/tags/optionals.html" class="tags has-addons"><span class="tag is-info is-rounded">optionals</span><span class="tag is-primary is-rounded">5</span></a></li>
     
     <li><a href="/tags/where.html" class="tags has-addons"><span class="tag is-info is-rounded">where</span><span class="tag is-primary is-rounded">5</span></a></li>
     
     <li><a href="/tags/erasure.html" class="tags has-addons"><span class="tag is-info is-rounded">erasure</span><span class="tag is-primary is-rounded">4</span></a></li>
     
     <li><a href="/tags/equatable.html" class="tags has-addons"><span class="tag is-info is-rounded">equatable</span><span class="tag is-primary is-rounded">3</span></a></li>
     
     <li><a href="/tags/destructure.html" class="tags has-addons"><span class="tag is-info is-rounded">destructure</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/error.html" class="tags has-addons"><span class="tag is-info is-rounded">error</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/extension.html" class="tags has-addons"><span class="tag is-info is-rounded">extension</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/guard.html" class="tags has-addons"><span class="tag is-info is-rounded">guard</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/if-let.html" class="tags has-addons"><span class="tag is-info is-rounded">if let</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/is.html" class="tags has-addons"><span class="tag is-info is-rounded">is</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/objc.html" class="tags has-addons"><span class="tag is-info is-rounded">objc</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/optional.html" class="tags has-addons"><span class="tag is-info is-rounded">optional</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/struct.html" class="tags has-addons"><span class="tag is-info is-rounded">struct</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/try.html" class="tags has-addons"><span class="tag is-info is-rounded">try</span><span class="tag is-primary is-rounded">2</span></a></li>
     
     <li><a href="/tags/.html" class="tags has-addons"><span class="tag is-info is-rounded">?</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/caseiterable.html" class="tags has-addons"><span class="tag is-info is-rounded">CaseIterable</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/customreflectable.html" class="tags has-addons"><span class="tag is-info is-rounded">CustomReflectable</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/data.html" class="tags has-addons"><span class="tag is-info is-rounded">Data</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/expressiblebystringliteral.html" class="tags has-addons"><span class="tag is-info is-rounded">ExpressibleByStringLiteral</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/rawrepresentable.html" class="tags has-addons"><span class="tag is-info is-rounded">RawRepresentable</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/as.html" class="tags has-addons"><span class="tag is-info is-rounded">as</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/autoclosure.html" class="tags has-addons"><span class="tag is-info is-rounded">autoclosure</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/break.html" class="tags has-addons"><span class="tag is-info is-rounded">break</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/catch.html" class="tags has-addons"><span class="tag is-info is-rounded">catch</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/closure.html" class="tags has-addons"><span class="tag is-info is-rounded">closure</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/copyonwrite.html" class="tags has-addons"><span class="tag is-info is-rounded">copy-on-write</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/coredata.html" class="tags has-addons"><span class="tag is-info is-rounded">coredata</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/either.html" class="tags has-addons"><span class="tag is-info is-rounded">either</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/fallthrough.html" class="tags has-addons"><span class="tag is-info is-rounded">fallthrough</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/for.html" class="tags has-addons"><span class="tag is-info is-rounded">for</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/for-case.html" class="tags has-addons"><span class="tag is-info is-rounded">for case</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/groupby.html" class="tags has-addons"><span class="tag is-info is-rounded">groupby</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/guard-let.html" class="tags has-addons"><span class="tag is-info is-rounded">guard let</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/if-case.html" class="tags has-addons"><span class="tag is-info is-rounded">if case</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/indirect.html" class="tags has-addons"><span class="tag is-info is-rounded">indirect</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/init.html" class="tags has-addons"><span class="tag is-info is-rounded">init</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/init.html" class="tags has-addons"><span class="tag is-info is-rounded">init?</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/inout.html" class="tags has-addons"><span class="tag is-info is-rounded">inout</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/label.html" class="tags has-addons"><span class="tag is-info is-rounded">label</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/literal.html" class="tags has-addons"><span class="tag is-info is-rounded">literal</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/method.html" class="tags has-addons"><span class="tag is-info is-rounded">method</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/overload.html" class="tags has-addons"><span class="tag is-info is-rounded">overload</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/package.html" class="tags has-addons"><span class="tag is-info is-rounded">package</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/partition.html" class="tags has-addons"><span class="tag is-info is-rounded">partition</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/performance.html" class="tags has-addons"><span class="tag is-info is-rounded">performance</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/property.html" class="tags has-addons"><span class="tag is-info is-rounded">property</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/protocols.html" class="tags has-addons"><span class="tag is-info is-rounded">protocols</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/range.html" class="tags has-addons"><span class="tag is-info is-rounded">range</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/self.html" class="tags has-addons"><span class="tag is-info is-rounded">self</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/tupealias.html" class="tags has-addons"><span class="tag is-info is-rounded">tupealias</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/tuple.html" class="tags has-addons"><span class="tag is-info is-rounded">tuple</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/typealias.html" class="tags has-addons"><span class="tag is-info is-rounded">typealias</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/unique.html" class="tags has-addons"><span class="tag is-info is-rounded">unique</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/value-type.html" class="tags has-addons"><span class="tag is-info is-rounded">value type</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/valuetype.html" class="tags has-addons"><span class="tag is-info is-rounded">valuetype</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/vararg.html" class="tags has-addons"><span class="tag is-info is-rounded">vararg</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/wildcard.html" class="tags has-addons"><span class="tag is-info is-rounded">wildcard</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/zip.html" class="tags has-addons"><span class="tag is-info is-rounded">zip</span><span class="tag is-primary is-rounded">1</span></a></li>
     
     <li><a href="/tags/.html" class="tags has-addons"><span class="tag is-info is-rounded">~=</span><span class="tag is-primary is-rounded">1</span></a></li>
     

        </ul>
       </li>
      </ul>


     </aside> 


    </div>
   </div>
  </div>
 </section>

 <div class="footer">
  <article class="media" id="followme">
   <figure class="media-left">
    <p class="image is-64x64">
     <img src="/img/terhechte.jpg" class="profile-image" />
    </p>
   </figure>
   <div class="media-content">
       <div class="columns">
           <div class="column">
               <div class="content">
                   <p>
                       <strong>Benedikt Terhechte</strong> <a href="https://twitter.com/terhechte"><small>@terhechte</small></a>
                       <br />
                       If you read this far, you should <a href="https://twitter.com/terhechte">follow Benedikt on Twitter</a>.<br />
                       APPVENTURE is dedicated to providing articles about Swift, macOS, iOS &amp; Linux development.
                   </p>
                   <p>
                       <strong>2011 - 2019 Benedikt Terhechte</strong>
                   </p>
               </div>
           </div>
           <div class="column">
               <p>
                   <a href="https://terhech.de">Benedikt's private blog can be found
                       at <strong>terhech.de</strong></a>
               </p>
               <p>
                   <br />
                   <strong>Other Profiles</strong>
               </p>
               <p class="subtitle is-6">
                   <a href="https://twitter.com/terhechte"><i class="fab fa-twitter"></i></a>
                   <a href="https://www.xing.com/profile/Benedikt_Terhechte">
                       <i class="fab fa-xing"></i>
                   </a>
                   <a href="https://twitter.com/terhechte">
                       <i class="fab fa-github"></i>
                   </a>
                   <a href="https://news.ycombinator.com/user?id=terhechte">
                       <i class="fab fa-hacker-news"></i>
                   </a>
               </p>
           </div>
       </div>
   </div>
   <div class="media-right">
    <a href="https://twitter.com/terhechte" class="button is-info is-rounded">
     <i class="fab fa-twitter"></i> 
     Follow Me</a>
   </div>
  </article>
 </div>



</body>


</html>
